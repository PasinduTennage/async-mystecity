narwhal_50_best_throughput = [97.5,
                              3902,
                              15988.5,
                              38935,
                              46906.5,
                              86109,
                              101715.5,
                              124664,
                              137872.5]
narwhal_50_best_latency = [3211,
                           3395,
                           3719,
                           3455,
                           3450.5,
                           3568,
                           3483.5,
                           3594,
                           6835.5]
narwhal_50_best_std = [50.91168825,
                       0,
                       487.903679,
                       0,
                       61.51828996,
                       0,
                       53.03300859,
                       0,
                       50.9955621]

narwhal_10_best_throughput = [
                              804,
                              8225.5,
                              32953,
                              48170,
                              65634,
                              82166,
                              90535,
                              97446.5,
                              118724,
                              134138,
                              135853,
                              137696.5,
                              140947,
                              149572.5,
                              148354,
                              147579]
narwhal_10_best_latency = [
                           3241.5,
                           3366,
                           3207,
                           3286.5,
                           3239.5,
                           3331,
                           3316,
                           3340,
                           3307,
                           3385,
                           3537.5,
                           4097.5,
                           4827,
                           5016,
                           5657,
                           7193.5]
narwhal_10_best_std = [
                       36.5742059,
                       67.5798693,
                       0,
                       15.027958,
                       38.7874093,
                       65.05382387,
                       0,
                       53.74011537,
                       45.9625535,
                       0,
                       19.09188309,
                       38.3731957,
                       23.3452378,
                       71.177849,
                       0,
                       28.99137803]

narwhal_10_crash_throughput = [671.5,
                               6721.5,
                               20133,
                               26874.5,
                               40279,
                               50827,
                               59186.5,
                               62748,
                               80592.5,
                               100731]
narwhal_10_crash_latency = [6451,
                            6493,
                            6502,
                            6658,
                            7070.5,
                            10583.5,
                            12038,
                            15238,
                            18483,
                            20579.5]
narwhal_10_crash_std = [7.071067812,
                        63.1534624,
                        0,
                        50.8742418,
                        84.14570696,
                        57.8778131,
                        23.606707,
                        12.3330445,
                        19.9188309,
                        69.6301218]

cm_50_best_throughput = [500,
                         9999.8,
                         50000.33333,
                         99999.33333,
                         149999,
                         200000,
                         249995,
                         299996,
                         350011.6667]
cm_50_best_latency = [1178.202539,
                      1186.832448,
                      1284.07133,
                      1401.153446,
                      1502.986537,
                      1637.659351,
                      1876.949064,
                      1957.744283,
                      5348.730638]
cm_50_best_std = [0.9623688211,
                  0.8553073249,
                  1.450257346,
                  1.548894129,
                  1.044139796,
                  1.470297509,
                  2.283979291,
                  2.909658679,
                  13.1748076]

cm_10_best_throughput = [1000.008333,
                         5000,
                         20000.16667,
                         49999.58333,
                         100000.8333,
                         109995.4167,
                         129997.8333,
                         150012.5,
                         160010.6667]
cm_10_best_latency = [1467.148109,
                      1471.577586,
                      1499.237269,
                      1564.547418,
                      1715.819575,
                      1716.888732,
                      2178.542747,
                      2906.859714,
                      10138.91678]
cm_10_best_std = [23.05382315,
                  17.15382909,
                  17.30436006,
                  18.76618254,
                  22.36968289,
                  20.35605621,
                  40.75013134,
                  17.6969418,
                  17.928501]

cm_10_crash_throughput = [699.9404762,
                          3500.238095,
                          14000,
                          35001.78571,
                          69994.04762]
cm_10_crash_latency = [1452.7213,
                       1460.288906,
                       1500.428153,
                       2901.56166,
                       29882.64918]
cm_10_crash_std = [19.45132269,
                   12.5257232,
                   14.28888281,
                   52.7974656,
                   60.6823017]

mm_50_best_throughput = [500,
                         10000.26667,
                         49999.66667,
                         100000,
                         150000,
                         199994.6667,
                         250001.6667,
                         300012,
                         350002.3333]
mm_50_best_latency = [903.5824975,
                      913.5262949,
                      982.2440548,
                      1071.582266,
                      1157.807603,
                      1273.459842,
                      1390.334166,
                      1486.508137,
                      1786.216761]
mm_50_best_std = [0.6094743011,
                  0.6653546026,
                  0.8133872395,
                  0.7456353697,
                  0.9463564263,
                  0.4989514461,
                  1.221892294,
                  1.144705726,
                  4.824239691]

mm_w5_l1_10_best_throughput = [999.9666667,
                               5000,
                               20000.16667,
                               50000.41667,
                               99999.16667,
                               110000.9167,
                               129998.9167,
                               149998.75,
                               190761.6667]
mm_w5_l1_10_best_latency = [1117.361718,
                            1121.765681,
                            1145.982456,
                            1194.474093,
                            1314.661354,
                            1329.569848,
                            1700.436221,
                            2127.640038,
                            18374.2026]
mm_w5_l1_10_best_std = [22.7058906,
                        17.53247598,
                        16.96662931,
                        16.7420311,
                        21.83421962,
                        20.26519706,
                        38.84374645,
                        18.7456356,
                        69.648384]

mm_w5_l1_10_crash_throughput = [700.0238095,
                                3500.059524,
                                13999.04762,
                                35000.59524,
                                69995.2381]
mm_w5_l1_10_crash_latency = [1213.897927,
                             1225.263327,
                             1250.058981,
                             2522.414619,
                             25725.4155]
mm_w5_l1_10_crash_std = [17.7045776,
                         22.46841834,
                         21.33618635,
                         53.779424,
                         16.667308]

mm_w5_l2_10_best_throughput = [1000.016667,
                               5000.083333,
                               20000,
                               50000.83333,
                               100000,
                               109996.3333,
                               129997.8333,
                               150018.75,
                               182671.6667]
mm_w5_l2_10_best_latency = [1098.357876,
                            1100.63567,
                            1124.938811,
                            1173.105438,
                            1283.967351,
                            1286.371746,
                            1668.099843,
                            5359.131172,
                            20898.80305]
mm_w5_l2_10_best_std = [19.79299261,
                        16.90929816,
                        16.78851119,
                        17.28610543,
                        18.7694872,
                        15.1341223,
                        52.34623708,
                        29.990599,
                        61.485683]

mm_w5_l2_10_crash_throughput = [700.0238095,
                                3500,
                                14000.95238,
                                34997.61905,
                                70004.7619]
mm_w5_l2_10_crash_latency = [1139.291936,
                             1148.181706,
                             1179.544746,
                             3266.988201,
                             26571.5988]
mm_w5_l2_10_crash_std = [11.03152165,
                         11.95137549,
                         11.23323322,
                         20.003513,
                         21.698751]

mm_w4_l1_10_best_throughput = [999.9916667,
                               4999.958333,
                               20000.16667,
                               50000,
                               100004.1667,
                               109999.0833,
                               129997.8333,
                               150011.25,
                               179743.3333]
mm_w4_l1_10_best_latency = [942.0811251,
                            946.8980521,
                            965.3847225,
                            1015.981149,
                            1123.545967,
                            1170.303491,
                            1643.049356,
                            2080.912385,
                            25476.32102]
mm_w4_l1_10_best_std = [18.30675068,
                        17.87328663,
                        17.1145453,
                        17.5759164,
                        18.89575972,
                        24.42223312,
                        71.92000839,
                        119.3061015,
                        13.608405]

mm_w4_l1_10_crash_throughput = [700.0238095,
                                3499.940476,
                                13999.04762,
                                34997.61905,
                                69995.2381]
mm_w4_l1_10_crash_latency = [1028.97687,
                             1032.985225,
                             1064.950642,
                             1707.167906,
                             22180.5487]
mm_w4_l1_10_crash_std = [24.25821073,
                         18.41692377,
                         20.45176309,
                         58.6019991,
                         22.1273885]

#################################################################################################


import matplotlib.pyplot as plt
from matplotlib.ticker import FuncFormatter

# Custom function to divide axis values by 1000
def thousands(x, pos):
    return f'{float(x)/1000.0:.1f}'
###############################################################################################
# figure 1 - best case
plt.figure(figsize=(12, 3))
plt.rcParams.update({'font.size': 14.30})
ax = plt.gca()
ax.xaxis.set_major_formatter(FuncFormatter(thousands))
ax.yaxis.set_major_formatter(FuncFormatter(thousands))

ax.set_xlim([0, 370000])
ax.set_ylim([900, 4500])

plt.plot(narwhal_50_best_throughput, narwhal_50_best_latency, 'ko-', label='Narwhal-Tusk-50')
plt.errorbar(narwhal_50_best_throughput, narwhal_50_best_latency, yerr=narwhal_50_best_std, fmt='o', ecolor='k', capsize=5,mfc='k',  mec='k' )

plt.plot(narwhal_10_best_throughput, narwhal_10_best_latency, 'ko--', label='Narwhal-Tusk-10')
plt.errorbar(narwhal_10_best_throughput, narwhal_10_best_latency, yerr=narwhal_10_best_std, fmt='o', ecolor='k', capsize=5,mfc='k',  mec='k' )

plt.plot(cm_50_best_throughput, cm_50_best_latency, 'ro-', label='Cordial Miners-50')
plt.errorbar(cm_50_best_throughput, cm_50_best_latency, yerr=cm_50_best_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r' )

plt.plot(cm_10_best_throughput, cm_10_best_latency, 'ro--', label='Cordial Miners-10')
plt.errorbar(cm_10_best_throughput, cm_10_best_latency, yerr=cm_10_best_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r' )

plt.plot(mm_50_best_throughput, mm_50_best_latency, 'go-', label='Mahi-Mahi-50')
plt.errorbar(mm_50_best_throughput, mm_50_best_latency, yerr=mm_50_best_std, fmt='o', ecolor='g', capsize=5,mfc='g', mec='g')

plt.plot(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, 'go--', label='Mahi-Mahi-10')
plt.errorbar(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, yerr=mm_w5_l1_10_best_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g' )


plt.xlabel('Throughput x 1k (req/s) ')
plt.ylabel('Average Latency (s)')
plt.grid()
plt.legend(loc='upper center', bbox_to_anchor=(0.5, 1.3), ncol=3, frameon=False)
plt.savefig('experiments/peformance-graphs/best-case.png', bbox_inches='tight', pad_inches=0)
plt.close()

##################################################################################################

# figure 2 - crash case
plt.figure(figsize=(5, 4))
plt.rcParams.update({'font.size': 14.30})
ax = plt.gca()
ax.xaxis.set_major_formatter(FuncFormatter(thousands))
ax.yaxis.set_major_formatter(FuncFormatter(thousands))

ax.set_xlim([0, 50000])
ax.set_ylim([0, 10000])


plt.plot(narwhal_10_crash_throughput, narwhal_10_crash_latency, 'k-', label='Narwhal-Tusk-10')
plt.errorbar(narwhal_10_crash_throughput, narwhal_10_crash_latency, yerr=narwhal_10_crash_std, fmt='o', ecolor='k', capsize=5,mfc='k',  mec='k')

plt.plot(cm_10_crash_throughput, cm_10_crash_latency, 'r-', label='Cordial Miners-10')
plt.errorbar(cm_10_crash_throughput, cm_10_crash_latency, yerr=cm_10_crash_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r')

plt.plot(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, 'g-', label='Mahi-Mahi-10')
plt.errorbar(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, yerr=mm_w5_l1_10_crash_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g')


plt.xlabel('Throughput x1k (req/s)')
plt.ylabel('Average Latency (s)')
plt.grid()
plt.legend(loc='lower center', bbox_to_anchor=(0.5, 1.02), ncol=2, frameon=False)
plt.savefig('experiments/peformance-graphs/crash.png', bbox_inches='tight', pad_inches=0)
plt.close()
###################################################################################################
# figure 3 - leaders
plt.figure(figsize=(6, 4))
plt.rcParams.update({'font.size': 14.30})
ax = plt.gca()
ax.xaxis.set_major_formatter(FuncFormatter(thousands))
ax.yaxis.set_major_formatter(FuncFormatter(thousands))

ax.set_xlim([0, 160000])
ax.set_ylim([800, 1900])


plt.plot(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, 'g-', label='Mahi-Mahi-l1')
plt.errorbar(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, yerr=mm_w5_l1_10_best_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g')

plt.plot(mm_w5_l2_10_best_throughput, mm_w5_l2_10_best_latency, 'r-', label='Mahi-Mahi-l2')
plt.errorbar(mm_w5_l2_10_best_throughput, mm_w5_l2_10_best_latency, yerr=mm_w5_l2_10_best_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r')

plt.plot(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, 'g--', label='Mahi-Mahi-l1-crash')
plt.errorbar(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, yerr=mm_w5_l1_10_crash_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g')

plt.plot(mm_w5_l2_10_crash_throughput, mm_w5_l2_10_crash_latency, 'r--', label='Mahi-Mahi-l2-crash')
plt.errorbar(mm_w5_l2_10_crash_throughput, mm_w5_l2_10_crash_latency, yerr=mm_w5_l2_10_crash_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r')


plt.xlabel('Throughput x1k (req/s)')
plt.ylabel('Average Latency (s)')
plt.grid()
plt.legend(loc='lower center', bbox_to_anchor=(0.5, 1.02), ncol=2, frameon=False)
plt.savefig('experiments/peformance-graphs/leaders.png', bbox_inches='tight', pad_inches=0)
plt.close()
##########################################################
# figure 4 - wave length
plt.figure(figsize=(5, 4))
plt.rcParams.update({'font.size': 14.30})
ax = plt.gca()
ax.xaxis.set_major_formatter(FuncFormatter(thousands))
ax.yaxis.set_major_formatter(FuncFormatter(thousands))

# ax.set_xlim([0, 1500])
ax.set_ylim([900, 10000])


plt.plot(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, 'g-', label='Mahi-Mahi-w5')
plt.errorbar(mm_w5_l1_10_best_throughput, mm_w5_l1_10_best_latency, yerr=mm_w5_l1_10_best_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g')

plt.plot(mm_w4_l1_10_best_throughput, mm_w4_l1_10_best_latency, 'r-', label='Mahi-Mahi-w4')
plt.errorbar(mm_w4_l1_10_best_throughput, mm_w4_l1_10_best_latency, yerr=mm_w4_l1_10_best_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r')

plt.plot(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, 'g--', label='Mahi-Mahi-w5-crash')
plt.errorbar(mm_w5_l1_10_crash_throughput, mm_w5_l1_10_crash_latency, yerr=mm_w5_l1_10_crash_std, fmt='o', ecolor='g', capsize=5,mfc='g',  mec='g')

plt.plot(mm_w4_l1_10_crash_throughput, mm_w4_l1_10_crash_latency, 'r--', label='Mahi-Mahi-w4-crash')
plt.errorbar(mm_w4_l1_10_crash_throughput, mm_w4_l1_10_crash_latency, yerr=mm_w4_l1_10_crash_std, fmt='o', ecolor='r', capsize=5,mfc='r',  mec='r')


plt.xlabel('Throughput (req/s)')
plt.ylabel('Average Latency (ms)')
plt.grid()
plt.legend(loc='lower center', bbox_to_anchor=(0.5, 1.02), ncol=2, frameon=False)
plt.savefig('experiments/peformance-graphs/waves.png', bbox_inches='tight', pad_inches=0)
plt.close()
